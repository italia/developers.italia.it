'use strict';function esDevelopersItaliaManager(a,b,c,d){this.config=$.extend({inputSelector:'',totalSelector:'.results-number',pagerSelector:'#paginator',sortSelector:'.sortingBy form select',sortMobileSelector:'#sortBy .modal-body a',sortMobileModal:'#sortBy',sortMobileTitle:{it:{relevance:'Rilevanza',az:'A/Z',za:'Z/A',popularity:'Popolarit\xE0',emerging:'Emergenti'},en:{relevance:'Relevance',az:'A/Z',za:'Z/A',popularity:'Popularity',emerging:'Emerging'}},pageContent:'.list-item-sorting > div',filterKeys:{tags:'list-tags',developmentStatus:'list-status'},filterKeysMobileSelectors:{tags:'pills-arguments',developmentStatus:'pills-development_status'}},b),this.objectConfig=$.extend({},c),this.queryObjects={},this.queryType=[a],this.params=d,this.language='it',this.setCurrentLanguage(),this.popupateFiltersFromUrl(),this.registerFiltersListeners(),this.executeCurrentQuery()}esDevelopersItaliaManager.prototype.executeCurrentQuery=function(){var a=this;this.updateSearchUrl(),this.currentQueryObject().executeESQuery().then(function(b){a.currentQueryObject().esSearchSuccessCallback.call(a.currentQueryObject(),b),$(a.config.pagerSelector+' ul li a').on('click',function(b){a.pagerCallback.call(a,b)})},function(b){a.currentQueryObject().esSearchErrorCallback.call(a.currentQueryObject(),b)})},esDevelopersItaliaManager.prototype.pagerCallback=function(a){a.preventDefault();var b=a.delegateTarget.getAttribute('page');this.params.page.pop(),this.params.page.push(b),this.executeCurrentQuery()},esDevelopersItaliaManager.prototype.setCurrentLanguage=function(){var a=location.pathname.substr(1).split('/')[0];-1==['it','en'].indexOf(a)&&(a='it'),this.language=a},esDevelopersItaliaManager.prototype.popupateFiltersFromUrl=function(){var a=this,b={type:'list-type'};for(var c in b){var d=this.params[c],e=b[c];if(0!=d.length)for(var f=0;f<d.length;f++)$('#'+e+' input[value="'+d[f]+'"]').prop('checked',!0),$('#pills-types input[value="'+d[f]+'"]').prop('checked',!0)}for(var c in this.config.filterKeys){var d=this.params[c],e=this.config.filterKeys[c],g=this.config.filterKeysMobileSelectors[c];if(0!=d.length)for(var f=0;f<d.length;f++)$('#'+e+' input[value="'+d[f]+'"]').prop('checked',!0),$('#'+g+' input[value="'+d[f]+'"]').prop('checked',!0)}var h=this.params.sort.slice().pop();'undefined'==typeof h&&(h='relevance'),$(this.config.sortSelector).val(h),$(this.config.sortMobileSelector).each(function(b,c){$(c).attr('sort')==h?($(c).addClass('active'),$(c).html(a.config.sortMobileTitle[a.language][$(c).attr('sort')]+' <i class="it-check"></i>')):($(c).removeClass('active'),$(c).html(a.config.sortMobileTitle[a.language][$(c).attr('sort')]))})},esDevelopersItaliaManager.prototype.updateSearchUrl=function(){var a=[];for(var b in this.config.filterKeys)for(var c=this.params[b],d=0;d<c.length;d++)a.push(b+'['+d+']='+c[d]);if(this.params['it-riuso-codiceIPA']){var e=this.params['it-riuso-codiceIPA'].slice(0).pop();'undefined'!=typeof e&&a.push('it-riuso-codiceIPA='+e)}if(this.params['it-riuso-codiceIPA-label']){var f=this.params['it-riuso-codiceIPA-label'].slice(0).pop();'undefined'!=typeof f&&a.push('it-riuso-codiceIPA-label='+f)}var g=this.params.type.slice(0).pop();'string'==typeof g&&'all'!=g&&a.push('type='+g);var h=this.params.keyword.slice(0).pop();'undefined'!=typeof h&&a.push('keyword='+h.split(' ').join('+'));var j=this.params.page.slice(0).pop();'undefined'==typeof j&&(j=0),a.push('page='+j),a.push('sort='+$(this.config.sortSelector).val()),history.pushState({},'',window.location.pathname+'?'+a.join('&'))},esDevelopersItaliaManager.prototype.registerFiltersListeners=function(){var a=this;for(var b in $('#list-type input[type="checkbox"]').on('change',function(b){if(b.target.checked){$('#list-type input[type="checkbox"]:checked').each(function(a,c){b.target.value!=c.value&&$(c).prop('checked',!1)});for(var c=$('#pills-types input[type="checkbox"]'),d=0;d<c.length;d++)b.target.value==c[d].value?$(c[d]).prop('checked',!0):$(c[d]).prop('checked',!1);a.queryType=[b.target.value]}else{for(var c=$('#pills-types input[type="checkbox"]'),d=0;d<c.length;d++)$(c[d]).prop('checked',!1);a.queryType=['all']}0==a.params.type.length?a.params.type.push(a.queryType.slice(0).pop()):(a.params.type.pop(),a.params.type.push(a.queryType.slice(0).pop())),a.executeCurrentQuery()}),$('#pills-types input[type="checkbox"]').on('change',function(a){a.target.checked&&$('#pills-types input[type="checkbox"]:checked').each(function(b,c){a.target.value!=c.value&&$(c).prop('checked',!1)})}),this.config.filterKeys)$('#'+this.config.filterKeys[b]+' input[type="checkbox"]').on('change',null,{p:b},function(b){a.clickOnFilterCallback.call(a,b)});$(this.config.sortSelector).on('change',function(b){var c=$(a.config.sortMobileSelector+'.active');c.html(a.config.sortMobileTitle[a.language][c.attr('sort')]),c.removeClass('active'),$(a.config.sortMobileSelector).each(function(c,d){$(d).attr('sort')==b.target.value&&($(d).addClass('active'),$(d).html(a.config.sortMobileTitle[a.language][$(d).attr('sort')]+' <i class="it-check"></i>'))}),a.executeCurrentQuery()}),$('#filters .modal-dialog .modal-header a.save').on('click',function(){for(var b in a.config.filterKeys)for(var c=a.config.filterKeys[b],d=a.config.filterKeysMobileSelectors[b],e=$('#'+d+' input[type="checkbox"]'),f=0;f<e.length;f++){e[f].checked&&-1==a.params[b].indexOf(e[f].value)&&(a.params[b].push(e[f].value),$('#'+a.config.filterKeys[b]+' input[value="'+e[f].value+'"]').prop('checked',!0));var g=a.params[b].indexOf(e[f].value);e[f].checked||-1==g||(a.params[b].splice(g,1),$('#'+a.config.filterKeys[b]+' input[value="'+e[f].value+'"]').prop('checked',!1))}$('#list-type input[type="checkbox"]').prop('checked',!1);var h=$('#pills-types input[type="checkbox"]:checked'),j='all';0<h.length&&(j=h.val(),$('#list-type input[value="'+j+'"]').prop('checked',!0)),0<a.params.type.length&&a.params.type.pop(),a.params.type.push(j),a.queryType=[j],a.executeCurrentQuery()}),$(this.config.sortMobileSelector).on('click',function(b){if(b.preventDefault(),!$(b.target).hasClass('active')){var c=$(a.config.sortMobileSelector+'.active');c.html(a.config.sortMobileTitle[a.language][c.attr('sort')]),c.removeClass('active'),$(b.target).html(a.config.sortMobileTitle[a.language][$(b.target).attr('sort')]+' <i class="it-check"></i>'),$(b.target).addClass('active')}var d=$(a.config.sortMobileSelector+'.active').attr('sort');$(a.config.sortSelector).val(d),a.executeCurrentQuery(),$(a.config.sortMobileModal).modal('hide')})},esDevelopersItaliaManager.prototype.removeFiltersListeners=function(){for(var a in this.config.filterKeys)$('#'+this.config.filterKeys[a]+' input[type="checkbox"]').off('change');$(this.config.sortSelector).off('change')},esDevelopersItaliaManager.prototype.clickOnFilterCallback=function(a){a.target.checked?(this.params[a.data.p].push(a.target.value),$('#'+this.config.filterKeysMobileSelectors[a.data.p]+' input[value="'+a.target.value+'"]').prop('checked',!0)):(this.params[a.data.p]=this.params[a.data.p].filter(function(b){return b!=a.target.value}),$('#'+this.config.filterKeysMobileSelectors[a.data.p]+' input[value="'+a.target.value+'"]').prop('checked',!1)),this.params.page.pop(),this.executeCurrentQuery()},esDevelopersItaliaManager.prototype.currentQueryObject=function(){var a=this.queryType.slice(0).pop();return'undefined'==typeof this.queryObjects[a]&&(this.queryObjects[a]=this.createQueryObject(a)),this.queryObjects[this.queryType]},esDevelopersItaliaManager.prototype.createQueryObject=function(a){var b,c=$.extend({},this.objectConfig[a]);switch(c.language=this.language,a){case'all':b=new esDevelopersItaliaQuery(c,this.params);break;case'platforms':b=new esDevelopersItaliaPlatformsQuery(c,this.params);break;case'software_open':b=new esDevelopersItaliaOpenSourceQuery(c,this.params);break;case'reuse_software':b=new esDevelopersItaliaReuseQuery(c,this.params);break;case'api':b=new esDevelopersItaliaApiQuery(c,this.params);break;case'category':b=new esDevelopersItaliaCategoryQuery(c,this.params);break;case'administrations':b=new esDevelopersItaliaPaQuery(c,this.params);break;default:}return b};function esDevelopersItaliaQuery(a,b){this.config=$.extend({fields:[],language:'it',inputSelector:'',totalSelector:'.results-number',pagerSelector:'#paginator',sortSelector:'.sortingBy form select',totalText:{it:'risultati',en:'results'},index:'publiccode',type:[],page:0,size:12,elasticsearch_connection:{host:'http://elasticsearch.developers.loc'},queryErrorMessage:{it:'C\'\xE8 stato un problema nel recuperare i rsultati della ricerca, riprova pi\xF9 tardi',en:'There was a problem finding the search results, please try again later'},intro:{it:'Hai cercato',en:'You have searched for'},autocomplete_all_text:{it:'Cerca in tutto il sito',en:'Search all over the site'},pageContent:'.list-item-sorting > div',filterKeys:{tags:'list-tags',developmentStatus:'list-status'},category:{it:{missing:{label:'Tipologia Software',id:'missing'},administrations:{label:'Amministrazione',id:'administrations'},software_open:{label:'Software Open Source',id:'software-open'},reuse_software:{label:'Software a Riuso',id:'software-reuse'},projects:{label:'Piattaforme',id:'projects'},api:{label:'API',id:'api'},faqs:{label:'Faqs',id:'faqs'},pages:{label:'Tipologia Software',id:'pages'},posts:{label:'News',id:'news'}},en:{missing:{label:'Software Type',id:'missing'},administrations:{label:'Administration',id:'administrations'},software_open:{label:'Software Open Source',id:'software-open'},reuse_software:{label:'Re-use Software',id:'software-reuse'},projects:{label:'Platforms',id:'projects'},api:{label:'API',id:'api'},faqs:{label:'Faqs',id:'faqs'},pages:{label:'Software Type',id:'pages'},posts:{label:'News',id:'news'}}}},a),this.throbber,this.languages={it:'ita',en:'eng'},this.readMore={it:'Leggi di pi\xF9',en:'read more'},this.params=b,this.templates=Handlebars.templates,this.client=new elasticsearch.Client(this.config.elasticsearch_connection)}esDevelopersItaliaQuery.prototype.getFilterInQuery=function(){var a=[];for(var b in this.config.filterKeys){var c=this.params[b];if(0!=c.length)for(var d,e=0;e<c.length;e++)d={term:{}},d.term[b]=c[e],a.push(d)}var f=this.params['it-riuso-codiceIPA'].slice(0).pop();return'undefined'!=typeof f&&a.push({term:{"it-riuso-codiceIPA":f}}),a},esDevelopersItaliaQuery.prototype.getIndexQuery=function(){return this.config.index},esDevelopersItaliaQuery.prototype.getDocumentTypeQuery=function(){return Array.isArray(this.config.type)?this.config.type.slice(0):this.config.type},esDevelopersItaliaQuery.prototype.getFromQuery=function(){var a='undefined'!=typeof this.params&&'undefined'!=typeof this.params.page?this.params.page.slice(0).pop():0;return'undefined'==typeof a?0:a*this.config.size},esDevelopersItaliaQuery.prototype.getSizeQuery=function(){return this.config.size},esDevelopersItaliaQuery.prototype.getSortQuery=function(){var a=[],b=$(this.config.sortSelector).val();switch(b){case'az':a.push({"name.sort":{order:'asc'}});break;case'za':a.push({"name.sort":{order:'desc'}});break;case'popularity':a.push({"vitality-score":{order:'desc'}});break;case'emerging':a.push({releaseDate:{order:'desc'}});break;default:}return a},esDevelopersItaliaQuery.prototype.esSearchSuccessCallback=function(a){var b='';if('undefined'!=typeof a.hits&&'undefined'!=typeof a.hits.hits&&Array.isArray(a.hits.hits)){'undefined'==typeof this.throbber?'':this.throbber.stop(),$(this.config.pageContent).text(''),this.renderResultCount(a.hits.total);for(var c=0;c<a.hits.hits.length;c++){switch(a.hits.hits[c]._type){case'software':b=this.renderSoftware(a.hits.hits[c]._source);break;case'post':b=this.renderPost(a.hits.hits[c]._source);}$(this.config.pageContent).append(b)}this.renderPager(a.hits.total)}},esDevelopersItaliaQuery.prototype.esSearchErrorCallback=function(){'undefined'==typeof this.throbber?'':this.throbber.stop(),this.renderErrorMessage()},esDevelopersItaliaQuery.prototype.getQuery=function(){var a=this.params.keyword.slice(0).pop(),b=this.getFilterInQuery(),c=this.config.language,d=this.languages[c],e={query:{bool:{must:[{bool:{should:[{bool:{must:[{term:{_type:'post'}},{terms:{type:['projects']}},{term:{lang:c}}]}},{term:{_type:'software'}}]}}]}}};return'undefined'!=typeof a&&(a=a.split('+').join(' '),e.query.bool.must.push({multi_match:{query:'undefined'==typeof a?'':a,fields:['name?6','description.'+d+'.localizedName^6','description.'+d+'.shortDescription^5','description.'+d+'.longDescription^4','title^6','subtitle^5','html^4','it-riuso-codiceIPA-label^6','name.ngram^3','description.'+d+'.localizedName.ngram^3','description.'+d+'.shortDescription.ngram^2','description.'+d+'.longDescription.ngram','title.ngram^3','subtitle.ngram^2','html.ngram']}})),0<b.length&&(e.query.bool.filter=b),e},esDevelopersItaliaQuery.prototype.executeESQuery=function(){this.renderIntro(),$(this.config.pageContent).text(''),this.throbber=Throbber({color:'black',padding:30,size:100,fade:200,clockwise:!1}).appendTo($('.list-item-sorting > div')[0]).start();var a=this.getIndexQuery(),b=this.getDocumentTypeQuery(),c=this.getQuery();c.sort=this.getSortQuery();var d={index:a,body:c,from:this.getFromQuery(),size:this.getSizeQuery()};return 0<b.length&&(d.type=b),this.client.search(d)},esDevelopersItaliaQuery.prototype.renderErrorMessage=function(){var a=this.config.language,b=this.templates.message({class:'',message:this.config.queryErrorMessage[a]});$(this.config.pageContent).html(b)},esDevelopersItaliaQuery.prototype.renderIntro=function(){var a=this.params.keyword.slice(0).pop(),b=this.config.language,c=$('.intro > h1');'undefined'!=typeof a&&(c.text(''),c.html(this.config.intro[b]+' "'+a.split('+').join(' ')+'"'))},esDevelopersItaliaQuery.prototype.renderResultCount=function(a){var b=this.config.language;$(this.config.totalSelector).html(this.templates.tot({tot:a,text:this.config.totalText[b]}))},esDevelopersItaliaQuery.prototype.renderPager=function(a){if($(this.config.pagerSelector+' ul li a').off('click'),$(this.config.pagerSelector).text(''),!(a<this.config.size)){var b=0,c=this.config.size,d=this.params.page.slice(0).pop(),e=Math.ceil(a/c),f=[];'undefined'==typeof d&&(d=0),d=parseInt(d),4<d&&(b=d-4);for(var g=b;g<b+9&&!(g>=e);g++)f.push({title:g+1,classes:g==d?' active ':'',current:d==g,page:g});var h={title:'<',classes:d==b?' disabled ':'',current:!1,page:d-1},j={title:'>',classes:d==e-1?' disabled ':'',current:!1,page:d+1};$(this.config.pagerSelector).append(this.templates.pager({pages:f,prev:h,next:j}))}},esDevelopersItaliaQuery.prototype.renderSoftware=function(a){var b='http://via.placeholder.com/350x150',c=a.name,d=this.config.language,e=this.getSoftwareType(a);'undefined'!=typeof a.description[this.languages[d]].screenshots&&0<a.description[this.languages[d]].screenshots.length&&(b=a.description[this.languages[d]].screenshots.slice(0).pop()),'undefined'!=typeof a.description[this.languages[d]].localisedName&&(c=a.description[this.languages[d]].localisedName);var f={name:name,localisedName:decodeHtmlEntity(c),language:this.config.language,screenshot:b,readMore:this.readMore[d],category:e.label.toUpperCase(),categoryClass:['icon','icon-type-'+e.id].join(' '),path:'/'+d+'/software/'+a.name.toLowerCase().split(' ').join('-')};return this.templates.search(f)},esDevelopersItaliaQuery.prototype.renderPost=function(a){var b='http://via.placeholder.com/350x150',c=a.title,d=this.config.language,e=this.getPostType(a);('undefined'!=typeof a.logo||null!=a.logo)&&(b=a.logo);var f={name:a.title,localisedName:decodeHtmlEntity(c),language:d,screenshot:b,readMore:this.readMore[d],category:e.label.toUpperCase(),categoryClass:['icon','icon-type-'+e.id].join(' '),path:a.url};return this.templates.search(f)},esDevelopersItaliaQuery.prototype.getSoftwareType=function(a){var b=this.config.language,c=this.config.category[b].missing;return c=null==a['it-riuso-codiceIPA']?this.config.category[b].software_open:this.config.category[b].reuse_software,c},esDevelopersItaliaQuery.prototype.getPostType=function(a){var b=this.config.language,c=this.config.category[b].missing;return'undefined'!=typeof a.type&&(c=this.config.category[b][a.type]),c};function esDevelopersItaliaPlatformsQuery(a,b){esDevelopersItaliaQuery.call(this,a,b)}esDevelopersItaliaPlatformsQuery.prototype=Object.create(esDevelopersItaliaQuery.prototype),esDevelopersItaliaPlatformsQuery.prototype.getQuery=function(){var a=this.params.keyword.slice(0).pop(),b=this.getFilterInQuery(),c={query:{bool:{must:[],filter:[{term:{type:'projects'}},{term:{lang:this.config.language}}]}}};return'undefined'!=typeof a&&(a=a.split('+').join(' '),c.query.bool.must.push({multi_match:{query:a,fields:['title^6','subtitle^5','title.ngram^3','subtitle.ngram^2','html.ngram']}})),0<b.length&&(c.query.bool.filter=b),c};function esDevelopersItaliaOpenSourceQuery(a,b){esDevelopersItaliaQuery.call(this,a,b)}esDevelopersItaliaOpenSourceQuery.prototype=Object.create(esDevelopersItaliaQuery.prototype),esDevelopersItaliaOpenSourceQuery.prototype.getQuery=function(){var a=this.params.keyword.slice(0).pop(),b=this.getFilterInQuery(),c=this.config.language,d=this.languages[c],e={query:{bool:{must:[],must_not:{exists:{field:'it-riuso-codiceIPA'}}}}};return'undefined'!=typeof a&&(a=a.split('+').join(' '),e.query.bool.must.push({multi_match:{query:a,fields:['name?6','description.'+d+'.localizedName^6','description.'+d+'.shortDescription^5','description.'+d+'.longDescription^4','name.ngram^3','description.'+d+'.localizedName.ngram^3','description.'+d+'.shortDescription.ngram^2','description.'+d+'.longDescription.ngram']}})),0<b.length&&(e.query.bool.filter=b),e};function esDevelopersItaliaReuseQuery(a,b){esDevelopersItaliaQuery.call(this,a,b)}esDevelopersItaliaReuseQuery.prototype=Object.create(esDevelopersItaliaQuery.prototype),esDevelopersItaliaReuseQuery.prototype.getQuery=function(){var a=this.params.keyword.slice(0).pop(),b=this.getFilterInQuery(),c=this.config.language,d=this.languages[c],e={query:{bool:{must:[{exists:{field:'it-riuso-codiceIPA'}},{term:{_type:'software'}}]}}};return'undefined'!=typeof a&&(a=a.split('+').join(' '),e.query.bool.must.push({multi_match:{query:a,fields:['name?6','description.'+d+'.localizedName^6','description.'+d+'.shortDescription^5','description.'+d+'.longDescription^4','it-riuso-codiceIPA-label^6','name.ngram^3','description.'+d+'.localizedName.ngram^3','description.'+d+'.shortDescription.ngram^2','description.'+d+'.longDescription.ngram']}})),0<b.length&&(e.query.bool.filter=b),e};function esDevelopersItaliaApiQuery(a,b){esDevelopersItaliaQuery.call(this,a,b)}esDevelopersItaliaApiQuery.prototype=Object.create(esDevelopersItaliaQuery.prototype),esDevelopersItaliaApiQuery.prototype.getQuery=function(){var a=this.params.keyword.slice(0).pop(),b=this.getFilterInQuery(),c={query:{bool:{must:[],filter:[{term:{type:'api'}},{term:{lang:this.config.language}}]}}};return'undefined'!=typeof a&&(a=a.split('+').join(' '),c.query.bool.must.push({multi_match:{query:a,fields:['title^6','subtitle^5','title.ngram^3','subtitle.ngram^2','html.ngram']}})),0<b.length&&(c.query.bool.filter=b),c};function esDevelopersItaliaPaQuery(a,b){esDevelopersItaliaQuery.call(this,a,b)}esDevelopersItaliaPaQuery.prototype=Object.create(esDevelopersItaliaQuery.prototype),esDevelopersItaliaPaQuery.prototype.getQuery=function(){var a=this.params.keyword.slice(0).pop(),b=this.getFilterInQuery(),c=this.config.language,d=this.languages[c],e={query:{bool:{must:[]}}};return'undefined'!=typeof a&&(a=a.split('+').join(' '),e.query.bool.must.push({multi_match:{query:a,fields:['name?6','description.'+d+'.localizedName^6','description.'+d+'.shortDescription^5','description.'+d+'.longDescription^4','name.ngram^3','description.'+d+'.localizedName.ngram^3','description.'+d+'.shortDescription.ngram^2','description.'+d+'.longDescription.ngram']}})),0<b.length&&(e.query.bool.filter=b),e},esDevelopersItaliaPaQuery.prototype.renderIntro=function(){var a=$('.intro > h1');if(this.params['it-riuso-codiceIPA-label']){var b=this.params['it-riuso-codiceIPA-label'].slice(0).pop();'undefined'!=typeof b&&(a.text(''),a.html(decodeURI(b)))}};function esDevelopersItaliaCategoryQuery(a,b){esDevelopersItaliaQuery.call(this,a,b)}esDevelopersItaliaCategoryQuery.prototype=Object.create(esDevelopersItaliaQuery.prototype);function esDevelopersItaliaAutocompleteAllQuery(a,b){esDevelopersItaliaQuery.call(this,a,b),this.searchObjectId}esDevelopersItaliaAutocompleteAllQuery.prototype=Object.create(esDevelopersItaliaQuery.prototype),esDevelopersItaliaAutocompleteAllQuery.prototype.getQuery=function(){var a=this.config.language,b=this.languages[a],c=$(this.config.inputSelector).val();return{query:{bool:{must:[{multi_match:{query:c,fields:['name.ngram^3','description.'+b+'.localizedName.ngram^3','description.'+b+'.shortDescription.ngram^2','description.'+b+'.longDescription.ngram','title.ngram^3','subtitle.ngram^2','html.ngram']}},{bool:{should:[{bool:{must:[{term:{_type:'post'}},{terms:{type:['projects','posts']}},{term:{lang:a}}]}},{term:{_type:'software'}}]}}]}}}},esDevelopersItaliaAutocompleteAllQuery.prototype.executeESQuery=function(){var a=this.getIndexQuery(),b=this.getDocumentTypeQuery(),c=this.getQuery(),d=this,e={index:a,body:c,from:this.getFromQuery(),size:this.getSizeQuery()};0<b.length&&(e.type=b),this.client.search(e).then(function(a){d.esSearchSuccessCallback.call(d,a)},function(a){d.esSearchErrorCallback.call(d,a)})},esDevelopersItaliaAutocompleteAllQuery.prototype.getSuggestionDataSoftware=function(a){var b=$(this.config.inputSelector).val(),c=this.config.language,d=a.name,e=this.languages[c],f=this.getSoftwareType(a);'undefined'!=typeof a.description[e]&&'undefined'!=a.description[e].localisedName&&(d=a.description[e].localisedName),b=b.trim().split(' ');for(let c=0;c<b.length;c++)d=d.replace(new RegExp(b[c],'ig'),'<b>$&</b>');return{name:d,language:c,category:f.label.toUpperCase(),categoryClass:['category','icon','icon-type-'+f.id].join(' '),path:'/'+c+'/software/'+a.name.toLowerCase().split(' ').join('-')}},esDevelopersItaliaAutocompleteAllQuery.prototype.getSuggestionDataPost=function(a){var b=$(this.config.inputSelector).val(),c=a.title,d=this.getPostType(a);b=b.trim().split(' ');for(let d=0;d<b.length;d++)c=c.replace(new RegExp(b[d],'ig'),'<b>$&</b>');return{name:c,language:this.config.language,category:d.label.toUpperCase(),categoryClass:['category','icon','icon-type-'+d.id].join(' '),path:a.url}},esDevelopersItaliaAutocompleteAllQuery.prototype.getSuggestionDataAdministration=function(a){var b=$(this.config.inputSelector).val(),c=this.config.language,d=a['it-riuso-codiceIPA-label'],e='/'+c;b=b.trim().split(' ');for(let c=0;c<b.length;c++)d=d.replace(new RegExp(b[c],'ig'),'<b>$&</b>');return e+='it'==c?'/amministrazioni':'/administrations',e+='?'+['it-riuso-codiceIPA='+a['it-riuso-codiceIPA'],'it-riuso-codiceIPA-label='+a['it-riuso-codiceIPA-label']].join('&'),{name:d,language:c,category:this.config.category[c].administrations.label,categoryClass:['category','icon','icon-type-'+this.config.category[c].administrations.id].join(' '),path:e}},esDevelopersItaliaAutocompleteAllQuery.prototype.esSearchSuccessCallback=function(a){var b=this.config.language,c=$('#suggestions');c.text('');var d=$(this.config.inputSelector).val();if(0!=d.length&&'undefined'!=typeof a.hits&&'undefined'!=typeof a.hits.hits&&Array.isArray(a.hits.hits)){for(var e=0;e<a.hits.hits.length;e++){var f;'software'==a.hits.hits[e]._type&&(f=this.getSuggestionDataSoftware(a.hits.hits[e]._source)),'post'==a.hits.hits[e]._type&&(f=this.getSuggestionDataPost(a.hits.hits[e]._source)),'administration'==a.hits.hits[e]._type&&(f=this.getSuggestionDataAdministration(a.hits.hits[e]._source)),c.append(this.templates.suggestion(f))}var g=['keyword='+d.trim().split(' ').join('+')];c.append(this.templates.suggestion({name:this.config.autocomplete_all_text[b],language:this.config.language,path:'/'+b+'/search?'+g.join('&')}))}};function esDevelopersItaliaAutocompletePlatformsQuery(a,b){esDevelopersItaliaQuery.call(this,a,b),this.searchObjectId='platforms'}esDevelopersItaliaAutocompletePlatformsQuery.prototype=Object.create(esDevelopersItaliaAutocompleteAllQuery.prototype),esDevelopersItaliaAutocompletePlatformsQuery.prototype.getQuery=function(){var a=$(this.config.inputSelector).val(),b={query:{bool:{must:[{multi_match:{query:a,fields:['title.ngram^3','subtitle.ngram^2','html.ngram']}}],filter:[{term:{type:'projects'}},{term:{lang:this.config.language}}]}}};return b};function esDevelopersItaliaAutocompleteSoftwareOpenSourceQuery(a,b){esDevelopersItaliaQuery.call(this,a,b),this.searchObjectId='software_open'}esDevelopersItaliaAutocompleteSoftwareOpenSourceQuery.prototype=Object.create(esDevelopersItaliaAutocompleteAllQuery.prototype),esDevelopersItaliaAutocompleteSoftwareOpenSourceQuery.prototype.getQuery=function(){var a=this.config.language,b=this.languages[a],c=$(this.config.inputSelector).val();return{query:{bool:{must:[{multi_match:{query:c,fields:['name.ngram^3','description.'+b+'.localizedName.ngram^3','description.'+b+'.shortDescription.ngram^2','description.'+b+'.longDescription.ngram']}},{term:{_type:'software'}}],must_not:{exists:{field:'it-riuso-codiceIPA'}}}}}};function esDevelopersItaliaAutocompleteSoftwareRiusoQuery(a,b){esDevelopersItaliaQuery.call(this,a,b),this.searchObjectId='reuse_software'}esDevelopersItaliaAutocompleteSoftwareRiusoQuery.prototype=Object.create(esDevelopersItaliaAutocompleteAllQuery.prototype),esDevelopersItaliaAutocompleteSoftwareRiusoQuery.prototype.getQuery=function(){var a=this.config.language,b=this.languages[a],c=$(this.config.inputSelector).val();return{query:{bool:{must:[{multi_match:{query:c,fields:['name.ngram^3','description.'+b+'.localizedName.ngram^3','description.'+b+'.shortDescription.ngram^2','description.'+b+'.longDescription.ngram']}},{term:{_type:'software'}},{exists:{field:'it-riuso-codiceIPA'}}]}}}};function esDevelopersItaliaAutocompleteAPIQuery(a,b){esDevelopersItaliaQuery.call(this,a,b),this.searchObjectId='api'}esDevelopersItaliaAutocompleteAPIQuery.prototype=Object.create(esDevelopersItaliaAutocompleteAllQuery.prototype),esDevelopersItaliaAutocompleteAPIQuery.prototype.getQuery=function(){var a=$(this.config.inputSelector).val(),b={query:{bool:{must:[{multi_match:{query:a,fields:['title.ngram^3','subtitle.ngram^2','html.ngram']}}],filter:[{term:{type:'api'}},{term:{lang:this.config.language}}]}}};return b};function esDevelopersItaliaAutocompletePAQuery(a,b){esDevelopersItaliaQuery.call(this,a,b),this.searchObjectId='pa'}esDevelopersItaliaAutocompletePAQuery.prototype=Object.create(esDevelopersItaliaAutocompleteAllQuery.prototype),esDevelopersItaliaAutocompletePAQuery.prototype.getQuery=function(){var a=$(this.config.inputSelector).val();return{query:{bool:{must:[{multi_match:{query:a,fields:['it-riuso-codiceIPA-label.ngram']}},{term:{_type:'administration'}}]}}}};
